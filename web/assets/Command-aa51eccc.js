import{r as s,j as e,a as p,F as P,_ as T,b as _}from"./index-c059fe49.js";import{c as A,e as q,$ as W,b as D,d as B,_ as E,a as F}from"./index-e27f2a65.js";import{c as R}from"./utils-587908ec.js";import{B as N}from"./button-8a20b2ea.js";import{T as U,a as V,b as x,c as y,d as X,e as g}from"./table-6f9cf1aa.js";function G({prop:t,defaultProp:o,onChange:a=()=>{}}){const[r,c]=J({defaultProp:o,onChange:a}),d=t!==void 0,f=d?t:r,i=A(a),u=s.useCallback(h=>{if(d){const b=typeof h=="function"?h(t):h;b!==t&&i(b)}else c(h)},[d,t,c,i]);return[f,u]}function J({defaultProp:t,onChange:o}){const a=s.useState(t),[r]=a,c=s.useRef(r),d=A(o);return s.useEffect(()=>{c.current!==r&&(d(r),c.current=r)},[r,c,d]),a}function K(t){const o=s.useRef({value:t,previous:t});return s.useMemo(()=>(o.current.value!==t&&(o.current.previous=o.current.value,o.current.value=t),o.current.previous),[t])}function Q(t){const[o,a]=s.useState(void 0);return q(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let f,i;if("borderBoxSize"in d){const u=d.borderBoxSize,h=Array.isArray(u)?u[0]:u;f=h.inlineSize,i=h.blockSize}else f=t.offsetWidth,i=t.offsetHeight;a({width:f,height:i})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else a(void 0)},[t]),o}const L="Switch",[Y,be]=W(L),[Z,ee]=Y(L),te=s.forwardRef((t,o)=>{const{__scopeSwitch:a,name:r,checked:c,defaultChecked:d,required:f,disabled:i,value:u="on",onCheckedChange:h,...$}=t,[b,v]=s.useState(null),S=D(o,l=>v(l)),w=s.useRef(!1),C=b?Boolean(b.closest("form")):!0,[n=!1,m]=G({prop:c,defaultProp:d,onChange:h});return s.createElement(Z,{scope:a,checked:n,disabled:i},s.createElement(B.button,E({type:"button",role:"switch","aria-checked":n,"aria-required":f,"data-state":j(n),"data-disabled":i?"":void 0,disabled:i,value:u},$,{ref:S,onClick:F(t.onClick,l=>{m(k=>!k),C&&(w.current=l.isPropagationStopped(),w.current||l.stopPropagation())})})),C&&s.createElement(se,{control:b,bubbles:!w.current,name:r,value:u,checked:n,required:f,disabled:i,style:{transform:"translateX(-100%)"}}))}),ae="SwitchThumb",ne=s.forwardRef((t,o)=>{const{__scopeSwitch:a,...r}=t,c=ee(ae,a);return s.createElement(B.span,E({"data-state":j(c.checked),"data-disabled":c.disabled?"":void 0},r,{ref:o}))}),se=t=>{const{control:o,checked:a,bubbles:r=!0,...c}=t,d=s.useRef(null),f=K(a),i=Q(o);return s.useEffect(()=>{const u=d.current,h=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(h,"checked").set;if(f!==a&&b){const v=new Event("click",{bubbles:r});b.call(u,a),u.dispatchEvent(v)}},[f,a,r]),s.createElement("input",E({type:"checkbox","aria-hidden":!0,defaultChecked:a},c,{tabIndex:-1,ref:d,style:{...t.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function j(t){return t?"checked":"unchecked"}const H=te,oe=ne,O=s.forwardRef(({className:t,...o},a)=>e(H,{className:R("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:a,children:e(oe,{className:R("pointer-events-none block h-4 w-4 bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));O.displayName=H.displayName;const re=s.lazy(()=>T(()=>import("./AddCommand-adbddebe.js"),["assets/AddCommand-adbddebe.js","assets/index-c059fe49.js","assets/index-41523689.css","assets/textarea-985f14f1.js","assets/utils-587908ec.js","assets/button-8a20b2ea.js","assets/index-e27f2a65.js"])),ce=s.lazy(()=>T(()=>import("./StartMessage-7466773d.js"),["assets/StartMessage-7466773d.js","assets/index-c059fe49.js","assets/index-41523689.css","assets/textarea-985f14f1.js","assets/utils-587908ec.js","assets/button-8a20b2ea.js","assets/index-e27f2a65.js","assets/table-6f9cf1aa.js"]));function de(){const[t,o]=s.useState(!1),[a,r]=s.useState([]),[c,d]=s.useState(!1),[f,i]=s.useState({}),[u,h]=s.useState(!1),$=async()=>{h(!0);const l=(await _.get("/api/v1/command")).data.data;r(l),h(!1)};s.useEffect(()=>{$()},[]);const b=async(n,m)=>{await _.put(`/api/v1/command/${n}/update-status`,{is_active:m}).then(l=>{const M=l.data.data,I=a.map(z=>z.id==M.id?M:z);r(I)}).catch(l=>{console.log(l)})},v=()=>{d(!1),o(!0)},S=n=>{i(n),d(!0),o(!0)},w=async n=>{confirm(`Do you want to delete command /${n.command}?`)&&await _.delete(`/api/v1/command/${n.id}`).then(m=>{const l=a.filter(k=>k.id!=n.id);r(l),alert("Command deleted")}).catch(m=>{console.log(m)})},C=n=>{if(c){const m=a.map(l=>l.id==n.id?n:l);r(m)}else r([...a,n])};return p(P,{children:[e("h1",{className:"text-4xl font-semibold text-gray-800 dark:text-white",children:"Command"}),e("h2",{className:"text-gray-400 text-md mb-5",children:"Command is used to handle automatic messages"}),p(N,{onClick:v,children:[p("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-pencil-plus",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M8 20l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4h4z"}),e("path",{d:"M13.5 6.5l4 4"}),e("path",{d:"M16 18h4m-2 -2v4"})]}),"Add Command"]}),p("div",{className:"flex flex-row items-start gap-5 mt-6",children:[e("div",{className:"basis-2/3 bg-white",children:p(U,{children:[e(V,{children:p(x,{children:[e(y,{children:"Command"}),e(y,{children:"Message"}),e(y,{children:"Active"}),e(y,{children:"Â "})]})}),e(X,{children:u?e(x,{children:e(g,{colSpan:4,children:"Fetching data..."})}):a.length>0?e(P,{children:a==null?void 0:a.map(n=>p(x,{children:[e(g,{className:"px-5 py-5",children:p("p",{className:"text-gray-900 whitespace-no-wrap",children:["/",n.command," ",e("br",{}),e("span",{className:"text-gray-500",children:n.description})]})}),e(g,{className:"px-5 py-5",children:e("p",{className:"text-gray-900 whitespace-pre-wrap",children:n.message})}),e(g,{className:"px-5 py-5",children:e(O,{checked:n.is_active,onCheckedChange:()=>b(n.id,!n.is_active)})}),e(g,{className:"px-5 py-5",children:p("div",{className:"flex justify-center items-center",children:[e(N,{onClick:()=>S(n),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 opacity-70",size:"icon",children:p("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-edit",width:"15",height:"15",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),e("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),e("path",{d:"M16 5l3 3"})]})}),e("span",{className:"w-2"}),e(N,{onClick:()=>w(n),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200",size:"icon",children:p("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:"15",height:"15",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M4 7l16 0"}),e("path",{d:"M10 11l0 6"}),e("path",{d:"M14 11l0 6"}),e("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),e("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})]})})]},n.id))}):e(x,{children:e(g,{colSpan:4,className:"px-5 py-5",children:e("p",{className:"text-gray-900 whitespace-no-wrap text-center",children:"No commands found"})})})})]})}),e("div",{className:"basis-1/3 bg-white",children:e(ce,{})})]}),e(re,{isOpen:t,closeModal:()=>o(!1),setCommands:n=>C(n),isEdit:c,data:f})]})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{G as $,pe as C,O as S};
